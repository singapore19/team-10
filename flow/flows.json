[{"id":"1799e3db.df305c","type":"template","z":"f494ca17.ad08d8","name":"view_request_template","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <!-- Required meta tags-->\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">\n    \n    <!-- Bootstrap CSS -->\n    <!-- Required meta tags-->\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">\n    <meta http-equiv=\"x-ua-compatible\" content=\"ie=edge\">\n    <!-- Bootstrap CSS -->\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.2/css/bootstrap.min.css\" />\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css\">\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/css/bootstrap-datepicker3.css\" />\n    <link rel=\"stylesheet\" href=\"https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css\" />\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css\" />\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\"></script>\n    <script src=\"https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js\"></script>\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/jquery-ui.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js\"></script>\n\n    <style>\n    table{\n    counter-reset: section;\n    }\n    .count:before {\n    counter-increment: section;\n    content: counter(section);\n    }\n    .table-editable {\n        position: relative;\n        \n        .glyphicon {\n            font-size: 20px;\n        }\n    }\n    </style>\n    <nav class=\"navbar navbar-expand-lg navbar-light\" style='background-color: #0033a0'>\n    <a class=\"navbar-brand\" href=\"/homepage\" style=\"color:#FFFFFF;\">MWS - Administrator Interface<a>\n    <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n        <span class=\"navbar-toggler-icon\"></span>\n    </button>\n    <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n        <ul class=\"navbar-nav mr-auto\">\n            <li class=\"nav-item active\">\n                <a class=\"nav-link\" href=\"/homepage\" style=\"color:#FFFFFF;\">Home<span class=\"sr-only\"></span></a>\n            </li>\n            <li class=\"nav-item active\">\n                <a class=\"nav-link\" href=\"/homepage\" style=\"color:#FFFFFF;\">View Scheduled Requests<span class=\"sr-only\"></span></a>\n            </li>\n        </ul>\n    </div>\n    </nav>\n    <div class=\"jumbotron jumbotron-fluid text-center shadow p-3 mb-5 rounded\" style=\"background-color: #d0ecfd; display: block;\" align='center'>\n        <center><h1>View Scheduled Requests</h1></center>\n        <button href=\"\" class=\"btn btn-secondary\" onclick=\"addSchedule()\">Create AdHoc Request</button>\n        <button href=\"\" class=\"btn btn-secondary\">Save Updated Request</button>\n        <button href=\"/viewallrequests_delete\" class=\"btn btn-secondary\" onclick=\"deleteSchedules()\">Delete Selected Requests</button>\n        <table id=\"schedules\" class=\"table table-sm table-hover table-striped table-responsive table-editable\">\n            <tr><th>Request ID.</th><th>Request Date</th><th>   Request Type   </th><th>Preferred Timeslot</th><th>Pick Up Location</th><th>Drop Off Location</th><th>Request Status</th><th>Requester Telegram Chat ID</th><th>Emergency Contact No</th><th>Delete</th></tr>\n                <tr class=''>\n                    <td id=123>123</td>\n                    <td>04/10/2019</td>\n                    <td contenteditable=\"true\" align=\"right\">Delivery Of Donation</td>\n                    <td contenteditable=\"true\" align=\"right\">9:00 AM</td>\n                    <td contenteditable=\"true\" align=\"right\">25 Geylang East Ave 1, #01-05, S381125</td>\n                    <td contenteditable=\"true\" align=\"right\">70 Barker Rd, #05-01, S309936</td>\n                    <td contenteditable=\"true\" align=\"right\">Completed</td>\n                    <td contenteditable=\"true\" align=\"right\">rogerlee12</td>\n                    <td contenteditable=\"true\" align=\"right\">92130612</td>\n                    <td align='center'><input type='checkbox'></td>\n                </tr>    \n                <tr class=''>\n                    <td id=124>124</td>\n                    <td>04/10/2019</td>\n                    <td contenteditable=\"true\" align=\"right\">Staff Transport</td>\n                    <td contenteditable=\"true\" align=\"right\">11:00 AM</td>\n                    <td contenteditable=\"true\" align=\"right\">34 Amber Rd, #02-02, S311036</td>\n                    <td contenteditable=\"true\" align=\"right\">20 Geylang East Ave 1, #01-05 S381125</td>\n                    <td contenteditable=\"true\" align=\"right\">Completed</td>\n                    <td contenteditable=\"true\" align=\"right\">pierli16</td>\n                    <td contenteditable=\"true\" align=\"right\">84738339</td>\n                    <td align='center'><input type='checkbox'></td>\n                </tr>  \n                <tr class=''>\n                    <td id=127>127</td>\n                    <td>04/10/2019</td>\n                    <td contenteditable=\"true\" align=\"right\">Delivery Of Donation</td>\n                    <td contenteditable=\"true\" align=\"right\">03:00 PM</td>\n                    <td contenteditable=\"true\" align=\"right\">70 Barker Rd, #05-01, S309936</td>\n                    <td contenteditable=\"true\" align=\"right\">25 Geylang East Ave 1, #01-05 S381125</td>\n                    <td contenteditable=\"true\" align=\"right\">Pending</td>\n                    <td contenteditable=\"true\" align=\"right\">rogerlee12</td>\n                    <td contenteditable=\"true\" align=\"right\">92134489</td>\n                    <td align='center'><input type='checkbox'></td>\n                </tr>  \n        </table>\n    </div>\n    \n    <script>\n        function deleteSchedules() {\n            var rows = $(\"#schedules\").find(\"tr\");\n            \n            rows.each((index) => {\n                let row = rows[index];\n                if ($(row).find(\"td\").find(\"input\").prop(\"checked\")) {\n                    $(row).remove();\n                }\n            })\n        };\n        \n        function addSchedule() {\n            var last_row = $(\"#schedules tr:last\");\n            \n            var last_id = $(last_row).find(\"td:first\").prop(\"id\");\n            console.log(last_id);\n            \n            $('#schedules tr:last').after('<tr>\\\n                    <td id=' + (parseInt(last_id) + 1) + '>' + (parseInt(last_id) + 1) + '</td>\\\n                    <td contenteditable=\"true\"></td>\\\n                    <td contenteditable=\"true\" align=\"right\"></td>\\\n                    <td contenteditable=\"true\" align=\"right\"></td>\\\n                    <td contenteditable=\"true\" align=\"right\"></td>\\\n                    <td contenteditable=\"true\" align=\"right\"></td>\\\n                    <td contenteditable=\"true\" align=\"right\"></td>\\\n                    <td contenteditable=\"true\" align=\"right\"></td>\\\n                    <td contenteditable=\"true\" align=\"right\"></td>\\\n                    <td align=\"center\"><input type=\"checkbox\"></td>\\\n                </tr>');\n        };\n    </script>\n</html>","output":"str","x":468,"y":1400,"wires":[["8d60c319.b79f2"]]}]